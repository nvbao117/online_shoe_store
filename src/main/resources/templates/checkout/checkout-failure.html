<!DOCTYPE html>
<html xmlns:th="http://www.thymeleaf.org" lang="vi">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Thanh toán thất bại | 5A Store</title>
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.2/dist/css/bootstrap.min.css" rel="stylesheet">
    <link href="https://cdn.jsdelivr.net/npm/bootstrap-icons@1.10.5/font/bootstrap-icons.css" rel="stylesheet">
    <link rel="stylesheet" th:href="@{/checkout/css/checkout.css}">
    <link rel="stylesheet" th:href="@{/checkout/css/checkout-failure.css}">
</head>

<body>
    <div class="checkout-container">
        <div class="checkout-progress">
            <div class="progress-step completed">
                <div class="step-number"><i class="bi bi-check"></i></div>
                <span class="step-label">Thông tin giao hàng</span>
            </div>
            <div class="progress-line"></div>
            <div class="progress-step error">
                <div class="step-number"><i class="bi bi-x"></i></div>
                <span class="step-label">Thanh toán</span>
            </div>
            <div class="progress-line"></div>
            <div class="progress-step">
                <div class="step-number">3</div>
                <span class="step-label">Hoàn thành</span>
            </div>
        </div>

        <!-- Failure Content -->
        <div class="failure-container">
            <div class="failure-icon">
                <i class="bi bi-x-lg"></i>
            </div>

            <h1 class="failure-title">Thanh toán thất bại!</h1>
            <p class="failure-subtitle">Giao dịch của bạn không thể hoàn tất. Vui lòng thử lại.</p>

            <!-- Error Details -->
            <div class="error-card" th:if="${errorCode != null or errorMessage != null}">
                <div class="error-code" th:if="${errorCode != null}">
                    <i class="bi bi-exclamation-circle me-1"></i> Mã lỗi: <span th:text="${errorCode}"></span>
                </div>
                <div class="error-message" th:if="${errorMessage != null}" th:text="${errorMessage}">
                    Mô tả lỗi
                </div>
            </div>

            <!-- Order Info -->
            <div class="order-info" th:if="${orderId != null}">
                <span class="label">Đơn hàng: </span>
                <span class="value" th:text="${orderId}"></span>
            </div>

            <!-- Action Buttons -->
            <div class="action-buttons">
                <!-- Retry Button (only if canRetry is true) -->
                <a th:if="${canRetry != null and canRetry}" th:href="@{/checkout/retry/{orderId}(orderId=${orderId})}"
                    class="btn-retry">
                    <i class="bi bi-arrow-repeat"></i>
                    Thử thanh toán lại
                </a>

                <!-- Try Different Method -->
                <a th:href="@{/checkout/step2}" class="btn-retry" th:unless="${canRetry}">
                    <i class="bi bi-credit-card"></i>
                    Chọn phương thức khác
                </a>

                <a th:href="@{/}" class="btn-home">
                    <i class="bi bi-house"></i>
                    Về trang chủ
                </a>
            </div>

            <!-- Support Info -->
            <div class="support-info">
                <i class="bi bi-headset me-2"></i>
                Cần hỗ trợ? Liên hệ hotline: <strong>1900 1234</strong> hoặc email:
                <a href="mailto:support@shoestore.com">support@shoestore.com</a>
            </div>
        </div>
    </div>

    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.2/dist/js/bootstrap.bundle.min.js"></script>
</body>

</html>
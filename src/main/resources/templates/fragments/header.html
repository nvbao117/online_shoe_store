<!-- templates/fragments/header.html -->
<!DOCTYPE html>
<html xmlns:th="http://www.thymeleaf.org">

<head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>GiayTop1 - Trang Ch·ªß</title>

    <!-- Bootstrap + Bootstrap Icons (d√πng cho header) -->
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/css/bootstrap.min.css" rel="stylesheet" />
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap-icons@1.10.5/font/bootstrap-icons.css" />
    <link rel="icon" href="/favicon.ico">
    <!-- CSS header d√πng chung -->
    <link rel="stylesheet" th:href="@{/css/product-detail/header.css}" />

    <!-- Tailwind CSS (ph·∫ßn body b√™n d∆∞·ªõi v·∫´n d√πng tailwind nh∆∞ c≈©) -->
    <script src="https://cdn.tailwindcss.com"></script>

    <style>
        .tab-active {
            background-color: #3b82f6;
            color: white;
        }

        .sport-card:hover img {
            transform: scale(1.05);
        }

        /* ·∫®n thanh scroll ngang cho slider */
        .no-scrollbar::-webkit-scrollbar {
            display: none;
        }

        .no-scrollbar {
            -ms-overflow-style: none;
            scrollbar-width: none;
        }

        .slide-enter {
            opacity: 0;
            transform: translateX(30px);
        }

        .slide-enter-active {
            opacity: 1;
            transform: translateX(0);
            transition: all 0.35s ease;
        }

        .slide-exit {
            opacity: 1;
            transform: translateX(0);
        }

        .slide-exit-active {
            opacity: 0;
            transform: translateX(-30px);
            transition: all 0.35s ease;
        }
    </style>
</head>

<body>
    <header class="main-header" th:fragment="mainHeader">
        <!-- ==================== H√ÄNG TR√äN: N·ªÄN XANH NH·∫†T ==================== -->
        <div class="header-top-wrapper">
            <div class="header-top container d-flex align-items-center justify-content-between">

                <!-- Logo + Hotline -->
                <div class="d-flex align-items-center header-left">
                    <!-- Logo -->
                    <a th:href="@{/home}" class="header-logo">
                        <img th:src="@{/images/logo-shop/logo-sneaker.png}" alt="5A STORE" class="header-logo-img">
                    </a>

                    <!-- Hotline (gi·ªØ style gi·ªëng h√¨nh 1) -->
                    <div class="header-hotline ms-4">
                        <div class="hotline-label">
                            <i class="bi bi-telephone-fill me-1"></i> HOTLINE:
                        </div>
                        <div class="hotline-number">0819 893 3355</div>
                    </div>
                </div>



                <!-- √î t√¨m ki·∫øm s·∫£n ph·∫©m (RAG semantic fallback) -->
                <div class="header-search flex-grow-1 mx-4 position-relative">
                    <form class="search-form d-flex" th:action="@{/products}" method="get">
                        <input type="text" class="form-control search-input" id="mainSearchInput" name="keyword"
                            placeholder="T√¨m ki·∫øm s·∫£n ph·∫©m..." autocomplete="off">
                        <button type="submit" class="btn search-btn">
                            <i class="bi bi-search"></i>
                        </button>
                    </form>
                    <!-- Search Results Dropdown -->
                    <div id="search-results-dropdown"
                         class="position-absolute mt-1 bg-white shadow-xl rounded-xl overflow-hidden d-none"
                         style="
        top: 100%;
        z-index: 1001;
        width: 100%;
        max-width: 600px;
        left: 50%;
        transform: translateX(-50%);
        max-height: 450px;
        overflow-y: auto;
     ">
                        <div class="p-3 border-bottom d-flex justify-content-between align-items-center">
                            <span class="fw-bold" id="searchResultTitle">üîç K·∫øt qu·∫£ t√¨m ki·∫øm</span>
                            <button type="button" class="btn btn-sm btn-outline-secondary"
                                id="closeSearchResults">‚úï</button>
                        </div>
                        <div id="search-suggest" class="p-2"></div>
                    </div>
                </div>


                <!-- T√†i kho·∫£n + Gi·ªè h√†ng (ki·ªÉu gi·ªëng h√¨nh 2) -->
                <div class="header-right d-flex align-items-center">

                    <!-- CH∆ØA ƒëƒÉng nh·∫≠p -->
                    <div id="authButtons" class="d-flex align-items-center me-3 d-none">
                        <a href="/login" class="btn btn-outline-primary btn-sm me-2">ƒêƒÉng nh·∫≠p</a>
                        <a href="/register" class="btn btn-primary btn-sm">ƒêƒÉng k√Ω</a>
                    </div>
                    <div id="userProfile" class="relative inline-block group overflow-visible d-none">
                        <a class="flex items-center me-3 text-dark no-underline">

                            <div class="w-9 h-9 rounded-full bg-gray-200 flex items-center justify-center">
                                <i class="bi bi-person"></i>
                            </div>

                            <span id="username" class="ml-2 font-semibold hidden md:inline"></span>
                        </a>

                        <div class="absolute right-0 top-full pt-2 w-44 bg-white rounded-lg shadow-lg
                hidden group-hover:block z-50">
                            <a th:href="@{/profile}" class="block px-4 py-2 hover:bg-gray-100">
                                Th√¥ng tin c·ªßa t√¥i
                            </a>

                            <a href="/orders" class="block px-4 py-2 hover:bg-gray-100">
                                ƒê∆°n h√†ng
                            </a>

                            <button id="logoutBtn" class="w-full text-left px-4 py-2 text-red-600 hover:bg-red-50">
                                ƒêƒÉng xu·∫•t
                            </button>
                        </div>
                    </div>




                    <!-- Gi·ªè h√†ng -->
                    <div class="header-right-item">
                        <a th:href="@{/templates/cart}" class="text-decoration-none">
                            <div class="icon-circle position-relative">
                                <i class="bi bi-cart3"></i>
                                <!-- Badge s·ªë l∆∞·ª£ng s·∫£n ph·∫©m -->
                                <span id="cart-badge" class="cart-count" th:text="${cartItemCount}">0</span>
                            </div>
                        </a>
                    </div>

                </div>
            </div>
        </div>

        <!-- ==================== H√ÄNG D∆Ø·ªöI: MENU CH√çNH (N·ªÄN TR·∫ÆNG, CH·ªÆ XANH) ==================== -->
        <nav class="header-nav">
            <div class="container">
                <ul class="nav-list">
                    <li class="nav-item">
                        <a th:href="@{/home}">TRANG CH·ª¶</a>
                    </li>
                    <li class="nav-item">
                        <a th:href="@{/products}">S·∫¢N PH·∫®M</a>
                    </li>
                    <li class="nav-item">
                        <a th:href="@{/about}">GI·ªöI THI·ªÜU</a>
                    </li>
                    <li class="nav-item">
                        <a th:href="@{/contact}">LI√äN H·ªÜ</a>
                    </li>
                </ul>
            </div>
        </nav>
    </header>

    <script>
        (function () {
            const closeBtn = document.getElementById('closeSearchResults');
            const dropdown = document.getElementById('search-results-dropdown');
            if (closeBtn && dropdown) {
                closeBtn.addEventListener('click', () => dropdown.classList.add('d-none'));
            }
        })();
    </script>

</body>

</html>
<!-- File: src/main/resources/templates/product-detail.html -->
<!DOCTYPE html>
<html lang="vi" xmlns:th="http://www.thymeleaf.org">

<head>
    <meta charset="UTF-8">
    <title>Chi ti·∫øt s·∫£n ph·∫©m - 5A Store</title>
    <meta name="viewport" content="width=device-width, initial-scale=1">

    <!-- Bootstrap 5 CSS CDN -->
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/css/bootstrap.min.css" rel="stylesheet">

    <!-- Bootstrap Icons -->
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap-icons@1.10.5/font/bootstrap-icons.css">

    <!-- CSS -->
    <link rel="stylesheet" th:href="@{/css/product-detail/header.css}">
    <link rel="stylesheet" th:href="@{/css/product-detail/product-detail.css}">
</head>

<body>

    <!-- ================== HEADER D√ôNG CHUNG ================== -->
    <div th:replace="fragments/header :: mainHeader"></div>

    <main class="product-detail-page">
        <div class="container">

            <!-- ========= BREADCRUMB ========= -->
            <nav class="breadcrumb-wrapper small mb-3" aria-label="breadcrumb">
                <ol class="breadcrumb mb-0">
                    <li class="breadcrumb-item"><a href="/">Trang ch·ªß</a></li>
                    <li class="breadcrumb-item"><a href="#">Danh m·ª•c</a></li>
                    <li class="breadcrumb-item"><a href="#">Th∆∞∆°ng hi·ªáu</a></li>
                    <li class="breadcrumb-item active" aria-current="page" id="pd-breadcrumb-name">Chi ti·∫øt s·∫£n ph·∫©m
                    </li>
                </ol>
            </nav>

            <!-- ========= H√ÄNG CH√çNH ========= -->
            <div class="row g-4">
                <!-- C·ªôt tr√°i: H√¨nh s·∫£n ph·∫©m -->
                <div class="col-md-5">
                    <div class="product-image-card">
                        <!-- main image: JS s·∫Ω set src -->
                        <img id="pd-main-image" src="" alt="" class="img-fluid product-main-image">

                        <!-- thumbnails: JS s·∫Ω render -->
                        <div class="product-thumbnails mt-3" id="pd-thumbs"></div>
                    </div>
                </div>

                <!-- C·ªôt ph·∫£i: Th√¥ng tin -->
                <div class="col-md-7">
                    <div class="product-info">

                        <h1 class="product-title" id="pd-name"></h1>

                        <div class="product-meta small mb-2">
                            <div>M√£: <span class="fw-bold text-danger" id="pd-code">---</span></div>
                            <div>
                                Th∆∞∆°ng hi·ªáu: <span class="fw-bold text-primary" id="pd-brand">---</span> |
                                T√¨nh tr·∫°ng: <span class="fw-bold text-danger" id="pd-status">---</span>
                            </div>
                        </div>

                        <div class="product-price mb-3" id="pd-price"></div>

                        <!-- Ch·ªçn m√†u s·∫Øc -->
                        <div class="mb-3">
                            <div class="fw-semibold mb-1">Ch·ªçn: [M√†u s·∫Øc]</div>
                            <div class="d-flex flex-wrap gap-2" id="pd-colors"></div>
                        </div>

                        <!-- Ch·ªçn size -->
                        <div class="mb-3">
                            <div class="fw-semibold mb-1">Ch·ªçn: [Size]</div>
                            <div class="d-flex flex-wrap gap-2 product-size-list" id="pd-sizes"></div>
                        </div>

                        <!-- Khung ∆∞u ƒë√£i (gi·ªØ tƒ©nh) -->
                        <div class="promotion-box mb-3">
                            <div class="promotion-header">
                                <span class="promo-icon">üéÅ</span>
                                <span class="promo-title">∆ØU ƒê√ÉI</span>
                            </div>
                            <ul class="promotion-list mb-2">
                                <li>T·∫∑ng 1 ƒë√¥i v·ªõ c·∫ßu l√¥ng 5A.</li>
                                <li>S·∫£n ph·∫©m cam k·∫øt ch√≠nh h√£ng.</li>
                                <li>Thanh to√°n sau khi ki·ªÉm tra v√† nh·∫≠n h√†ng.</li>
                                <li>B·∫£o h√†nh theo ch√≠nh s√°ch c·ªßa h√£ng.</li>
                            </ul>

                            <div class="promotion-subtitle mb-1">
                                üéÅ ∆Øu ƒë√£i th√™m khi mua s·∫£n ph·∫©m t·∫°i <strong>5A STORE Premium</strong>
                            </div>
                            <ul class="promotion-list promotion-list-secondary">
                                <li>S∆°n logo m·∫∑t v·ª£t mi·ªÖn ph√≠.</li>
                                <li>B·∫£o h√†nh l∆∞·ªõi ƒëan trong 72 gi·ªù.</li>
                                <li>Thay gen v·ª£t mi·ªÖn ph√≠ tr·ªçn ƒë·ªùi.</li>
                                <li>T√≠ch l≈©y ƒëi·ªÉm th√†nh vi√™n.</li>
                            </ul>
                        </div>

                        <!-- Ch·ªçn s·ªë l∆∞·ª£ng -->
                        <div class="mb-3 d-flex align-items-center gap-2">
                            <span class="fw-semibold">S·ªë l∆∞·ª£ng:</span>
                            <div class="input-group input-group-sm quantity-group" style="width: 130px;">
                                <button class="btn btn-outline-secondary btn-qty-minus" type="button">-</button>
                                <input type="text" class="form-control text-center qty-input" value="1">
                                <button class="btn btn-outline-secondary btn-qty-plus" type="button">+</button>
                            </div>
                        </div>

                        <!-- N√∫t Mua ngay + Th√™m v√†o gi·ªè -->
                        <div class="d-flex flex-wrap gap-3 mb-4">
                            <button class="btn btn-primary flex-grow-1 btn-buy-now">
                                MUA NGAY
                            </button>
                            <button class="btn btn-outline-primary flex-grow-1 btn-add-cart">
                                TH√äM V√ÄO GI·ªé H√ÄNG
                            </button>
                        </div>

                    </div>
                </div>
            </div>

            <!-- ========= TAB M√î T·∫¢ / TH√îNG S·ªê ========= -->
            <div class="product-extra mt-4">
                <ul class="nav nav-tabs custom-tabs" role="tablist">
                    <li class="nav-item" role="presentation">
                        <button class="nav-link active" id="desc-tab" data-bs-toggle="tab" data-bs-target="#tab-desc"
                            type="button" role="tab">
                            M√î T·∫¢ S·∫¢N PH·∫®M
                        </button>
                    </li>
                </ul>

                <div class="tab-content custom-tab-content">
                    <!-- M√î T·∫¢: JS s·∫Ω ƒë·ªï v√†o ƒë√¢y -->
                    <div class="tab-pane fade show active" id="tab-desc" role="tabpanel" aria-labelledby="desc-tab">
                        <div id="pd-desc"></div>
                    </div>
                </div>
            </div>

            <!-- ========= KHUNG ƒê√ÅNH GI√Å (Shopee Style) ========= -->
            <section class="product-review mt-4" id="review-section">
                <div class="card shadow-sm">
                    <div class="card-header bg-light">
                        <h5 class="mb-0 fw-semibold">
                            <i class="bi bi-star-fill text-warning me-2"></i>
                            ƒê√°nh gi√° s·∫£n ph·∫©m
                        </h5>
                    </div>
                    <div class="card-body">
                        <!-- Review Summary - s·∫Ω ƒë∆∞·ª£c render b·ªüi JS -->
                        <div id="review-summary">
                            <div class="text-center py-4">
                                <div class="spinner-border text-primary" role="status">
                                    <span class="visually-hidden">ƒêang t·∫£i...</span>
                                </div>
                            </div>
                        </div>

                        <hr>

                        <!-- Reviews List - s·∫Ω ƒë∆∞·ª£c render b·ªüi JS -->
                        <div id="reviews-list"></div>
                    </div>
                </div>
            </section>
        </div>
    </main>

    <footer class="site-footer mt-5 py-3">
        <div class="container text-center small text-muted">
            ¬© 2024 5A Store - ƒê·ªì √°n Web b√°n gi√†y.
        </div>
    </footer>

    <!-- Bootstrap 5 JS -->
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/js/bootstrap.bundle.min.js"></script>

    <!-- ‚úÖ ProductId is extracted from URL by JavaScript (no Thymeleaf binding needed) -->

    <!-- JS c·ªßa trang detail -->
    <script th:src="@{/js/product-detail/product-detail.js}"></script>

    <!-- Auth status loader -->
    <script type="module" src="/pages/header-auth.page.js"></script>

    <!-- Product Review module -->
    <script type="module" src="/pages/product-review.page.js"></script>

</body>

</html>